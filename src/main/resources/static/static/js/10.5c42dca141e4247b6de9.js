webpackJsonp([10],{"93wr":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),i=a.n(s),r=a("JBQq"),n={name:"resource",data:function(){return{operationType:"",editData:{id:"",parentId:-1,resName:"",resUrl:"",resPath:"",icon:"el-icon-menu",sort:""},resData:[],editVisible:!1,tableData:[],searchKey:"",multipleSelection:[],pageNum:1,pageSize:10,pages:10,rules:{resName:[{required:!0,message:"请输入资源名称",trigger:"blur"}],resPath:[{required:!0,message:"请输入资源路径",trigger:"blur"}],resUrl:[{required:!0,message:"请输入资源url",trigger:"blur"}],icon:[{required:!0,message:"请选择图标",trigger:"blur"}]}}},created:function(){this.initData({})},mounted:function(){},computed:{},methods:{initData:function(e){var t=this;i()(e,{pageNum:this.pageNum,pageSize:this.pageSize}),r.a.get("resources",e).then(function(e){200===e.httpCode?(t.tableData=e.data,t.pages=e.pages):t.$message({type:"error",message:e.message})})},search:function(){this.initData({searchKey:this.searchKey})},add:function(){var e=this;this.editData={id:"",parentId:-1,resName:"",resUrl:"",resPath:"",icon:"el-icon-menu",sort:""},this.operationType="add",this.editVisible=!0,r.a.get("allRes",{}).then(function(t){200===t.httpCode?(e.resData=[{id:-1,resName:"请选择"}],e.resData.push.apply(e.resData,t.data)):e.$message({type:"error",message:t.message})})},handlePageChange:function(e){this.pageNum=e,this.initData({searchKey:this.searchKey})},handleSelectionChange:function(e){var t=e.map(function(e){return e.id});this.multipleSelection=t},delAll:function(){0===this.multipleSelection.length?this.$alert("您未选择任何数据！","警告",{confirmButtonText:"确定"}):this.deleteConfirm(this.multipleSelection)},edit:function(e){var t=this;this.editData={id:e.id,parentId:e.parentId?e.parentId:-1,resName:e.resName,resUrl:e.resUrl,resPath:e.resPath,icon:e.icon,sort:e.sort},this.operationType="edit",this.editVisible=!0,r.a.get("allRes",{}).then(function(e){200===e.httpCode?(t.resData=[{id:-1,resName:"请选择"}],t.resData.push.apply(t.resData,e.data)):t.$message({type:"error",message:e.message})})},deleteConfirm:function(e){var t=this;this.$confirm("您确定要删除数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=[];Array.isArray(e)?a=e:a.push(e),r.a.del("resources",{ids:a}).then(function(e){200===e.httpCode?(t.$message({type:"success",message:"删除成功！"}),t.initData({searchKey:t.searchKey})):t.$message({type:"error",message:e.message})})}).catch(function(){})},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(e)if(t.editVisible=!1,"edit"===t.operationType)r.a.put("resource",t.editData).then(function(e){200===e.httpCode?(t.$message({type:"success",message:"修改成功！"}),t.initData({searchKey:t.searchKey})):t.$message({type:"error",message:e.message})});else if("add"===t.operationType){var a={resName:t.editData.resName,resUrl:t.editData.resUrl,resPath:t.editData.resPath,icon:t.editData.icon,sort:t.editData.sort,parentId:t.editData.parentId};r.a.post("resource",a).then(function(e){200===e.httpCode?(t.$message({type:"success",message:"新增成功！"}),t.initData({searchKey:t.searchKey})):t.$message({type:"error",message:e.message})})}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),e._v("资源管理")])],1)],1),e._v(" "),a("div",{ref:"container",staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"base_btn handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAll}},[e._v("批量删除")]),e._v(" "),a("el-input",{staticClass:"handle-input mr10",staticStyle:{width:"200px"},attrs:{placeholder:"请输入资源名称"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),e._v(" "),a("el-button",{staticClass:"base_btn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"base_btn",staticStyle:{float:"right  !important"},attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:e.add}},[e._v("新增资源")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resName",label:"资源名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resPath",label:"资源路径",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"最近更新时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"han_btn",attrs:{type:"text",size:"small"},on:{click:function(a){e.edit(t.row)}}},[e._v("编辑\n                    ")]),e._v(" "),a("el-button",{staticClass:"han_btn",attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteConfirm(t.row.id)}}},[e._v("删除\n                    ")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.pages*e.pageSize,background:""},on:{"current-change":e.handlePageChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.editVisible,width:"500px"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"resourceForm",attrs:{model:e.editData,"label-width":"100px",rules:e.rules,"status-icon":""}},[a("el-form-item",{attrs:{label:"资源名称",prop:"resName"}},[a("el-input",{staticClass:"handle-input mr10",model:{value:e.editData.resName,callback:function(t){e.$set(e.editData,"resName",t)},expression:"editData.resName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父级资源名称"}},[a("el-select",{staticClass:"handle-input mr10",attrs:{placeholder:"选择父级资源"},model:{value:e.editData.parentId,callback:function(t){e.$set(e.editData,"parentId",t)},expression:"editData.parentId"}},e._l(e.resData,function(e){return a("el-option",{key:e.id,attrs:{label:e.resName,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"资源路径",prop:"resPath"}},[a("el-input",{staticClass:"handle-input mr10",model:{value:e.editData.resPath,callback:function(t){e.$set(e.editData,"resPath",t)},expression:"editData.resPath"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标",prop:"icon"}},[a("el-input",{staticClass:"handle-input mr10",attrs:{disabled:""},model:{value:e.editData.icon,callback:function(t){e.$set(e.editData,"icon",t)},expression:"editData.icon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序号",prop:"sort"}},[a("el-input-number",{staticClass:"handle-input mr10",attrs:{precision:1,step:1},model:{value:e.editData.sort,callback:function(t){e.$set(e.editData,"sort",t)},expression:"editData.sort"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("resourceForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,l,!1,function(e){a("LdgD")},"data-v-373a1d55",null);t.default=o.exports},LdgD:function(e,t){}});