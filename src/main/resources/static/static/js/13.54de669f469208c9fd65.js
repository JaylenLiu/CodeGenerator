webpackJsonp([13],{c3Tv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),s=a.n(i),l=a("JBQq"),n={name:"projectTable",data:function(){return{operationType:"",editData:{id:"",roleName:""},editVisible:!1,tableData:[],searchKey:"",multipleSelection:[],pageNum:1,pageSize:10,pages:10,rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}]}}},created:function(){this.initData({roleName:this.searchKey})},mounted:function(){this.$refs.container.style.height="680px"},computed:{},methods:{initData:function(e){var t=this;s()(e,{pageNum:this.pageNum,pageSize:this.pageSize}),l.a.get("roles",e).then(function(e){t.tableData=e.data,t.pages=e.pages})},search:function(){this.initData({roleName:this.searchKey})},add:function(){this.editData={id:"",roleName:""},this.operationType="add",this.editVisible=!0},handlePageChange:function(e){this.pageNum=e,this.initData({roleName:this.searchKey})},handleSelectionChange:function(e){var t=e.map(function(e){return e.id});this.multipleSelection=t},delAll:function(){0===this.multipleSelection.length?this.$alert("您未选择任何数据！","警告",{confirmButtonText:"确定"}):this.deleteConfirm(this.multipleSelection)},edit:function(e){this.editData={id:e.id,roleName:e.roleName},this.operationType="edit",this.editVisible=!0},deleteConfirm:function(e){var t=this;this.$confirm("您确定要删除数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=[];Array.isArray(e)?a=e:a.push(e),l.a.del("roles",{ids:a}).then(function(e){200===e.httpCode?(t.$message({type:"success",message:"删除成功！"}),t.initData({roleName:t.searchKey})):t.$message({type:"error",message:e.message})})}).catch(function(){})},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(e)if(t.editVisible=!1,"edit"===t.operationType)l.a.put("role",t.editData).then(function(e){200===e.httpCode?(t.$message({type:"success",message:"修改成功！"}),t.initData({roleName:t.searchKey})):t.$message({type:"error",message:e.message})});else if("add"===t.operationType){var a={roleName:t.editData.roleName};l.a.post("role",a).then(function(e){200===e.httpCode?(t.$message({type:"success",message:"新增成功！"}),t.initData({roleName:t.searchKey})):t.$message({type:"error",message:e.message})})}})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),e._v("角色信息")])],1)],1),e._v(" "),a("div",{ref:"container",staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"base_btn handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAll}},[e._v("批量删除\n            ")]),e._v(" "),a("el-input",{staticClass:"handle-input mr10",staticStyle:{width:"200px"},attrs:{placeholder:"请输入角色名称"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),e._v(" "),a("el-button",{staticClass:"base_btn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索\n            ")]),e._v(" "),a("el-button",{staticClass:"base_btn handle-del mr10",staticStyle:{float:"right  !important"},attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.add}},[e._v("新增\n            ")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"han_btn",attrs:{size:"small",type:"text"},on:{click:function(a){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"han_btn",attrs:{size:"small",type:"text"},on:{click:function(a){e.deleteConfirm(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.pages*e.pageSize,background:""},on:{"current-change":e.handlePageChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"500px"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"roleForm",attrs:{model:e.editData,"label-width":"100px",rules:e.rules,"status-icon":""}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{staticClass:"handle-input mr10",model:{value:e.editData.roleName,callback:function(t){e.$set(e.editData,"roleName",t)},expression:"editData.roleName"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("roleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(e){a("fUmL")},"data-v-0c15111e",null);t.default=o.exports},fUmL:function(e,t){}});